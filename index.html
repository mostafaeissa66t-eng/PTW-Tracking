<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HSE System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="auth-wrapper">
        <div id="login-container">
            <div class="auth-box">
                <h1>👷‍♂️</h1>
                <h2>HSE System</h2>
                <form id="login-form">
                    <div class="input-group"><input type="text" id="username" name="username" placeholder="اسم المستخدم"
                            required></div>
                    <div class="input-group"><input type="password" id="password" name="password"
                            placeholder="كلمة المرور" required></div>
                    <button type="submit" class="btn">تسجيل الدخول</button>
                    <p id="login-error" class="error-message"></p>
                </form>
                <p class="toggle-link">ليس لديك حساب؟ <span id="show-register-link">أنشئ حساباً جديداً</span></p>
            </div>
            <footer>
                <div class="social-icons">
                    <a href="https://www.linkedin.com/in/mostafa-eissa-dev" target="_blank" title="LinkedIn"><svg
                            viewBox="0 0 24 24">
                            <path
                                d="M19,3A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3H19M18.5,18.5V13.2A3.26,3.26 0 0,0 15.24,9.94C14.39,9.94 13.4,10.43 12.9,11.2V10.13H10.13V18.5H12.9V13.57C12.9,12.8 13.5,12.17 14.31,12.17A1.4,1.4 0 0,1 15.71,13.57V18.5H18.5M6.88,8.56A1.68,1.68 0 0,0 8.56,6.88C8.56,6 7.78,5.2 6.88,5.2A1.69,1.69 0 0,0 5.2,6.88C5.2,7.78 6,8.56 6.88,8.56M8.27,18.5V10.13H5.5V18.5H8.27Z" />
                        </svg></a>
                    <a href="mailto:mostafaeissa231@gmail.com" target="_blank" title="Gmail"><svg viewBox="0 0 24 24">
                            <path
                                d="M20,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6A2,2 0 0,0 20,4M20,8L12,13L4,8V6L12,11L20,6V8Z" />
                        </svg></a>
                </div>
                <p class="footer-credit">Designed & Developed by Mostafa Eissa</p>
            </footer>
        </div>
        <div id="register-container" class="hidden">
            <div class="auth-box">
                <h1>👷‍♂️</h1>
                <h2>HSE System - إنشاء حساب</h2>
                <form id="register-form">
                    <div class="input-group"><input type="text" id="reg-username" placeholder="اختر اسم مستخدم"
                            required></div>
                    <div class="input-group"><input type="email" id="reg-email" placeholder="البريد الإلكتروني"
                            required></div>
                    <div class="input-group"><input type="password" id="reg-password" placeholder="كلمة المرور"
                            required></div>
                    <div class="input-group"><input type="password" id="reg-confirm-password"
                            placeholder="تأكيد كلمة المرور" required></div>
                    <button type="submit" class="btn">إنشاء الحساب</button>
                    <p id="register-message" class="message"></p>
                </form>
                <p class="toggle-link">لديك حساب بالفعل؟ <span id="show-login-link">العودة لتسجيل الدخول</span></p>
            </div>
            <footer>
                <div class="social-icons">
                    <a href="https://www.linkedin.com/in/mostafa-eissa-dev" target="_blank" title="LinkedIn"><svg
                            viewBox="0 0 24 24">
                            <path
                                d="M19,3A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3H19M18.5,18.5V13.2A3.26,3.26 0 0,0 15.24,9.94C14.39,9.94 13.4,10.43 12.9,11.2V10.13H10.13V18.5H12.9V13.57C12.9,12.8 13.5,12.17 14.31,12.17A1.4,1.4 0 0,1 15.71,13.57V18.5H18.5M6.88,8.56A1.68,1.68 0 0,0 8.56,6.88C8.56,6 7.78,5.2 6.88,5.2A1.69,1.69 0 0,0 5.2,6.88C5.2,7.78 6,8.56 6.88,8.56M8.27,18.5V10.13H5.5V18.5H8.27Z" />
                        </svg></a>
                    <a href="mailto:mostafaeissa231@gmail.com" target="_blank" title="Gmail"><svg viewBox="0 0 24 24">
                            <path
                                d="M20,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6A2,2 0 0,0 20,4M20,8L12,13L4,8V6L12,11L20,6V8Z" />
                        </svg></a>
                </div>
                <p class="footer-credit">Designed & Developed by Mostafa Eissa</p>
            </footer>
        </div>
    </div>

    <div id="app-container" class="hidden">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h3>أهلاً، <span id="username-display"></span></h3>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li id="nav-new-permit" class="active"><a href="#">📝 إصدار تصريح</a></li>
                    <li id="nav-close-permit"><a href="#">📂 إغلاق تصريح</a></li>
                    <li id="nav-new-observation"><a href="#">🗒️ تسجيل ملاحظة</a></li>
                    <li id="nav-close-observation"><a href="#">✔️ إغلاق ملاحظة</a></li>
                    <li id="nav-new-nearmiss"><a href="#">⚠️ تسجيل حادث وشيك</a></li>
                    <li id="nav-close-nearmiss"><a href="#">❕ إغلاق حادث وشيك</a></li>
                    <li id="logout-btn"><a href="#">🚪 خروج</a></li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <div id="new-permit-view" class="view">
                <h1>إصدار تصريح عمل جديد</h1>
                <form id="permit-form" class="permit-form-grid">
                    <input type="text" id="projectName" placeholder="اسم المشروع" required>
                    <select id="permitType" required>
                        <option value="">اختر نوع التصريح...</option>
                        <option value="عمل على البارد">عمل على البارد</option>
                        <option value="عمل على الساخن">عمل على الساخن</option>
                        <option value="أماكن مغلقة">أماكن مغلقة</option>
                        <option value="عمل على ارتفاع">عمل على ارتفاع</option>
                        <option value="رفع وتصبين">رفع وتصبين</option>
                    </select>
                    <select id="shift" required>
                        <option value="">اختر الشيفت...</option>
                        <option value="صباحي">صباحي</option>
                        <option value="مسائي">مسائي</option>
                    </select>
                    <input type="text" id="requester" placeholder="الجهة الطالبة" required>
                    <input type="text" id="siteEngineer" placeholder="مهندس الموقع" required>
                    <input type="text" id="subcontractorName" placeholder="اسم مقاول الباطن">
                    <input type="text" id="workLocation" placeholder="مكان العمل بالتحديد" required>
                    <input type="number" id="workersCount" placeholder="عدد العمال" required>
                    <textarea id="description" placeholder="وصف تفصيلي للعمل" rows="5" required
                        class="full-width"></textarea>
                    <input type="text" id="issuer" readonly class="readonly-field full-width">
                    <button type="submit" class="btn full-width">إصدار التصريح الآن</button>
                </form>
            </div>

            <div id="close-permit-view" class="view hidden">
                <h1>قائمة التصاريح المفتوحة</h1>
                <div id="permits-list"></div>
            </div>

            <div id="new-observation-view" class="view hidden">
                <h1>تسجيل كارت ملاحظة جديد</h1>
                <form id="observation-form" class="permit-form-grid">
                    <input type="text" id="obsProjectName" placeholder="اسم المشروع" required>
                    <input type="text" id="obsLocation" placeholder="مكان الملاحظة" required>
                    <select id="obsType" required>
                        <option value="">اختر نوع الملاحظة...</option>
                        <option value="Unsafe Act">Unsafe Act</option>
                        <option value="Unsafe Condition">Unsafe Condition</option>
                        <option value="Environmental Impact">Environmental Impact</option>
                    </select>
                    <textarea id="obsDescription" placeholder="وصف المخالفة/الملاحظة" rows="5" required
                        class="full-width"></textarea>
                    <textarea id="obsCorrectiveAction" placeholder="الإجراء التصحيحي المتخذ" rows="3" required
                        class="full-width"></textarea>
                    <input type="text" id="obsIssuer" readonly class="readonly-field full-width">
                    <button type="submit" class="btn full-width">تسجيل الملاحظة</button>
                </form>
            </div>

            <div id="close-observation-view" class="view hidden">
                <h1>قائمة الملاحظات المفتوحة</h1>
                <div id="observations-list"></div>
            </div>

            <div id="new-nearmiss-view" class="view hidden">
                <h1>تسجيل تقرير حادث وشيك (Near Miss)</h1>
                <form id="nearmiss-form" class="permit-form-grid">
                    <input type="text" name="projectName" placeholder="اسم المشروع" required class="full-width">
                    <input type="text" name="location" placeholder="المكان" required>
                    <select name="concernType" required>
                        <option value="">اختر نوع المخالفة...</option>
                        <option value="Unsafe Act">تصرف غير آمن</option>
                        <option value="Unsafe Condition">وضع غير آمن</option>
                    </select>
                    <textarea name="potentialIncident" placeholder="صف الحادث/الخطر المحتمل والنتيجة المتوقعة..."
                        rows="4" required class="full-width"></textarea>
                    <textarea name="routineActivity" placeholder="اذكر باختصار الروتين اليومي لهذا العمل..." rows="3"
                        class="full-width"></textarea>
                    <textarea name="whatHappened" placeholder="ماذا حدث في ذلك اليوم؟" rows="4" required
                        class="full-width"></textarea>
                    <input type="text" name="whenWhomReported" placeholder="متى ولمن تم الإبلاغ؟" required>
                    <textarea name="involvedPersons" placeholder="أسماء الأشخاص المتداخلين (كل اسم في سطر)" rows="3"
                        class="full-width"></textarea>
                    <textarea name="actionTaken" placeholder="الإجراء الفوري المتخذ" rows="3" required
                        class="full-width"></textarea>
                    <input type="text" id="nearMissIssuer" readonly class="readonly-field full-width">
                    <button type="submit" class="btn full-width">تسجيل التقرير</button>
                </form>
            </div>

            <div id="close-nearmiss-view" class="view hidden">
                <h1>قائمة تقارير الحوادث الوشيكة المفتوحة</h1>
                <div id="nearmisses-list"></div>
            </div>

            <footer>
                <div class="social-icons">
                    <a href="https://www.linkedin.com/in/mostafa-eissa-dev" target="_blank" title="LinkedIn"><svg
                            viewBox="0 0 24 24">
                            <path
                                d="M19,3A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3H19M18.5,18.5V13.2A3.26,3.26 0 0,0 15.24,9.94C14.39,9.94 13.4,10.43 12.9,11.2V10.13H10.13V18.5H12.9V13.57C12.9,12.8 13.5,12.17 14.31,12.17A1.4,1.4 0 0,1 15.71,13.57V18.5H18.5M6.88,8.56A1.68,1.68 0 0,0 8.56,6.88C8.56,6 7.78,5.2 6.88,5.2A1.69,1.69 0 0,0 5.2,6.88C5.2,7.78 6,8.56 6.88,8.56M8.27,18.5V10.13H5.5V18.5H8.27Z" />
                        </svg></a>
                    <a href="mailto:mostafaeissa231@gmail.com" target="_blank" title="Gmail"><svg viewBox="0 0 24 24">
                            <path
                                d="M20,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6A2,2 0 0,0 20,4M20,8L12,13L4,8V6L12,11L20,6V8Z" />
                        </svg></a>
                </div>
                <p class="footer-credit">Designed & Developed by Mostafa Eissa</p>
            </footer>
        </main>
    </div>

    <div id="loader" class="loader-wrapper hidden">
        <div class="loader"></div>
    </div>

    <div id="notification-bell-container" style="display: none;"> <svg id="notification-bell-icon" viewBox="0 0 24 24">
            <path fill="currentColor"
                d="M14,20A2,2 0 0,1 12,22A2,2 0 0,1 10,20H14M12,2A1,1 0 0,1 13,3V4.08C15.84,4.56 18,7.03 18,10V16L21,19H3L6,16V10C6,7.03 8.16,4.56 11,4.08V3A1,1 0 0,1 12,2Z" />
        </svg>
        <div id="notification-count" class="hidden">0</div>
    </div>

    <div id="notification-panel" class="hidden">
        <div class="panel-header">
            <h3>الإشعارات</h3>
        </div>
        <ul id="notification-list"></ul>
    </div>

    <script src="script.js"></script>
</body>

</html>
